<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[SEA/TH] Rust Berry x3 | PVP Vanilla | Solo/Duo/Trio Only No Blueprint Wipe | Monthly Map Wipe </title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: white;
      overflow-y: auto;
    }

    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -2;
    }

    .video-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      z-index: -1;
    }

    .content {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
    }

    .logo {
      width: 280px;
      max-width: 80vw;
      margin-bottom: 20px;
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.2);
    }

    h1 {
      font-size: 2rem;
      margin: 10px 0;
      color: yellow;
    }

    .ip {
      font-size: 1.1rem;
      margin-bottom: 20px;
      opacity: 0.8;
    }

    .description {
      max-width: 600px;
      margin-bottom: 20px;
      line-height: 1.6;
      white-space: pre-line;
    }

    .online-count {
      margin-bottom: 30px;
      font-size: 1rem;
      color: #4caf50;
    }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .discord-btn, .join-btn {
      padding: 12px 24px;
      font-weight: bold;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      transition: background 0.3s ease;
    }

    .discord-btn {
      background-color: #5865F2;
    }

    .discord-btn:hover {
      background-color: #4752C4;
    }

    .join-btn {
      background-color: #ff9933;
    }

    .join-btn:hover {
      background-color: #e6831f;
    }

    .top-right {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
      z-index: 3;
    }

    .top-right button {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .top-right button:hover {
      background: rgba(255, 255, 255, 0.4);
    }

    #mute-btn {
      background: rgba(255, 0, 0, 0.6);
    }

    #mute-btn:hover {
      background: rgba(255, 0, 0, 0.8);
    }

    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(30, 30, 30, 0.95);
      color: white;
      padding: 20px 30px;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0,0,0,0.5);
      text-align: center;
      z-index: 999;
      display: none;
    }

    .popup .close-btn {
      position: absolute;
      top: 5px;
      right: 10px;
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
    }

    #leaderboard {
      margin-top: 40px;
      max-width: 600px;
      width: 100%;
      background: rgba(0,0,0,0.6);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }

    #leaderboard h2 {
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: #ffcc00;
    }

    #leaderboard table {
      width: 100%;
      border-collapse: collapse;
      color: white;
    }

    #leaderboard th, #leaderboard td {
      padding: 8px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.2);
      text-align: left;
    }

    #leaderboard tr:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    tr.gold { background-color: rgba(255, 215, 0, 0.2); }
    tr.silver { background-color: rgba(192, 192, 192, 0.2); }
    tr.bronze { background-color: rgba(205, 127, 50, 0.2); }
  </style>
</head>
<body>
  <video id="bg-video" autoplay muted loop playsinline>
    <source src="https://www.dropbox.com/scl/fi/py1ws1yr9i81stuillwfh/VDO_RUST.mp4?rlkey=hjy0i67d4ei6in3hyl2dq17ve&raw=1" type="video/mp4">
  </video>
  <div class="video-overlay"></div>

  <div class="top-right">
    <button onclick="switchLang('th')">‡πÑ‡∏ó‡∏¢</button>
    <button onclick="switchLang('en')">EN</button>
    <button id="mute-btn" onclick="toggleMute()">üîä ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
  </div>

  <div class="content">
    <img class="logo" src="https://i.imgur.com/H5i1wIg.png" alt="Rust Server Logo">
    <h1>[SEA/TH] Rust Berry x3 | PVP Vanilla </h1>
    <h1>Solo/Duo/Trio Only No Blueprint Wipe | Monthly Map Wipe </h1>
    <div class="ip">IP Server: 183.88.252.91:28015</div>

    <div class="description" id="desc"></div>
    <div class="online-count" id="player-count">Loading...</div>

    <div class="button-row">
      <a id="join-btn" class="join-btn" href="#" onclick="tryJoinGame(event)">üéÆ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡∏¢</a>
      <a id="discord-btn" class="discord-btn" href="https://discord.gg/d4EecGy3dX" target="_blank">üí¨ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° Discord</a>
    </div>

    <div id="leaderboard">
      <h2></h2>
      <table>
        <thead></thead>
        <tbody id="leaderboard-body"></tbody>
      </table>
    </div>
  </div>

  <div id="popup" class="popup">
    <button class="close-btn" onclick="closePopup()">‚ùå</button>
    <p>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!</p>
    <a href="steam://connect/183.88.252.91:28015" style="color: #4caf50; font-weight: bold;">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</a>
  </div>

  <audio id="bg-music" autoplay loop>
    <source src="https://www.dropbox.com/scl/fi/xrjs4chk4cf2o87hzo40d/Limp-Bizkit-Take-A-Look-Around-Instrumental-MI2-soundtrack.mp3?rlkey=msym0rq53elozbx4wpnt4axlo&raw=1" type="audio/mpeg">
  </audio>

  <script>
    const langData = {
      th: {
        description: `üî• ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏ö‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏£‡∏≠‡∏î\nüõ†Ô∏è ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô 3 ‡πÄ‡∏ó‡πà‡∏≤ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô ‡πÅ‡∏•‡∏∞‡∏ö‡∏∏‡∏Å‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏®‡∏±‡∏ï‡∏£‡∏π\nüö´ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö Pay-to-Win ‚Äî ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏°\nüë• ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡∏°: ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏Ñ‡∏ô (Solo/Duo/Trio)\n‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡πÇ‡∏Å‡∏á ‡πÉ‡∏ä‡πâ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏î‡πÜ\nü§ù ‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ô‡∏∏‡∏Å‡πÅ‡∏•‡∏∞‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°\nüó∫Ô∏è Wipe: ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà)\nüß¨ Blueprint Wipe: ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏ö\nüåê ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå: rustberrys.github.io/Rust-Berry\nüí¨ Discord: discord.gg/d4EecGy3yDX`,
        playerOnline: count => `üë• ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå: ${count}`,
        playerError: "‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô",
        joinGame: "üéÆ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡∏¢",
        discord: "üí¨ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° Discord",
        leaderboard: {
          title: "üèÜ 10 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà Kill ‡πÄ‡∏¢‡∏≠‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î",
          headers: ["‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö", "‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô", "Kills"]
        }
      },
      en: {
        description: `üî• Enter the battlefield of intense survival action\nüõ†Ô∏è Gather resources 3x faster, build your base, strategize, and raid enemies\nüö´ No Pay-to-Win ‚Äî everyone starts on equal ground\nüë• Team limit: Maximum 3 players (Solo/Duo/Trio)\n‚ö†Ô∏è No cheating, scripting, or third-party tools\nü§ù Respect all players and keep the game fun and fair\nüó∫Ô∏è Wipe: Monthly (Map Only)\nüß¨ Blueprint Wipe: Never\nüåê Website: rustberrys.github.io/Rust-Berry\nüí¨ Discord: discord.gg/d4EecGy3yDX`,
        playerOnline: count => `üë• Players Online: ${count}`,
        playerError: "‚ö†Ô∏è Failed to load player count",
        joinGame: "üéÆ Join Game",
        discord: "üí¨ Join Discord",
        leaderboard: {
          title: "üèÜ Top 10 Players with Most Kills",
          headers: ["Rank", "Player Name", "Kills"]
        }
      }
    };

    let currentLang = 'th';
    let lastPlayerCount = null;

    function switchLang(lang) {
      currentLang = lang;
      document.getElementById('desc').innerHTML = langData[lang].description.replace(/\n/g, "<br>");
      updatePlayerCount(lastPlayerCount);
      document.getElementById('join-btn').textContent = langData[lang].joinGame;
      document.getElementById('discord-btn').textContent = langData[lang].discord;
      renderLeaderboardHeader();
    }

    function updatePlayerCount(count) {
      const text = count !== null
        ? langData[currentLang].playerOnline(count)
        : langData[currentLang].playerError;
      document.getElementById("player-count").textContent = text;
    }

    fetch("https://api.battlemetrics.com/servers/32598846")
      .then(res => res.json())
      .then(data => {
        const count = data.data.attributes.players;
        lastPlayerCount = count;
        updatePlayerCount(count);
      })
      .catch(() => {
        lastPlayerCount = null;
        updatePlayerCount(null);
      });

    const audio = document.getElementById('bg-music');
    const muteBtn = document.getElementById('mute-btn');

    function toggleMute() {
      audio.muted = !audio.muted;
      muteBtn.textContent = audio.muted ? 'üîá ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á' : 'üîä ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á';
    }

    window.addEventListener('click', function enableAudio() {
      audio.muted = false;
      audio.play().catch(() => {});
      window.removeEventListener('click', enableAudio);
    });

    function tryJoinGame(event) {
      event.preventDefault();
      const steamLink = "steam://connect/183.88.252.91:28015";
      window.open(steamLink, "_self");
      setTimeout(() => {
        navigator.clipboard.writeText(steamLink).then(() => {
          document.getElementById("popup").style.display = "block";
        });
      }, 1000);
    }

    function closePopup() {
      document.getElementById("popup").style.display = "none";
    }

    function renderLeaderboardHeader() {
      const headers = langData[currentLang].leaderboard.headers;
      const thead = document.querySelector("#leaderboard thead");
      thead.innerHTML = `
        <tr>
          <th>${headers[0]}</th>
          <th>${headers[1]}</th>
          <th>${headers[2]}</th>
        </tr>
      `;
      document.querySelector("#leaderboard h2").textContent = langData[currentLang].leaderboard.title;
    }

    function showLeaderboardErrorPopup() {
    const popup = document.getElementById("popup");
    popup.querySelector("p").textContent = currentLang === 'th'
      ? "‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ"
      : "‚ö†Ô∏è Failed to load leaderboard or no data available";
    popup.querySelector("a").style.display = "none";
    popup.style.display = "block";
  }

  function loadLeaderboard() {
  fetch("http://localhost:3000/api/kills")
    .then(res => res.json())
    .then(topPlayers => {
      const tbody = document.getElementById("leaderboard-body");
      tbody.innerHTML = "";

      if (!Array.isArray(topPlayers) || topPlayers.length === 0) {
        showLeaderboardErrorPopup();
        return;
      }

      const medals = ["ü•á", "ü•à", "ü•â"];
      for (let i = 0; i < 10; i++) {
        const player = topPlayers[i];
        const row = document.createElement("tr");

        if (i === 0) row.classList.add("gold");
        else if (i === 1) row.classList.add("silver");
        else if (i === 2) row.classList.add("bronze");

        const rankDisplay = medals[i] || `#${i + 1}`;
        const name = player?.name || "--";
        const kills = player?.kills?.toString() || "--";

        row.innerHTML = `
          <td>${rankDisplay}</td>
          <td>${name}</td>
          <td>${kills}</td>
        `;
        tbody.appendChild(row);
      }
    })
    .catch(() => {
      // ‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
      showLeaderboardErrorPopup();

      const tbody = document.getElementById("leaderboard-body");
      tbody.innerHTML = "";

      const medals = ["ü•á", "ü•à", "ü•â"];
      for (let i = 0; i < 10; i++) {
        const row = document.createElement("tr");

        if (i === 0) row.classList.add("gold");
        else if (i === 1) row.classList.add("silver");
        else if (i === 2) row.classList.add("bronze");

        const rankDisplay = medals[i] || `#${i + 1}`;
        row.innerHTML = `
          <td>${rankDisplay}</td>
          <td>--</td>
          <td>--</td>
        `;
        tbody.appendChild(row);
      }
    });
}


  switchLang('th');
    loadLeaderboard();
  </script>
</body>
</html>
